# Figure out which slot the tracker compass is being held in, and the player's selected item slot
execute store result score slot tc_compass run data get entity @s Inventory[{tag:{tracker_compass:1b}}].Slot
execute store result score selected tc_compass run data get entity @s SelectedItemSlot

# Figure out the y coordinate of the player being tracked
execute store result score @a[tag=tracked] ycoord run data get entity @a[tag=tracked,limit=1] Pos[1]

# If a hunter is in the overworld, update their compass to the overworld compass
# (And yes, this is the only way to iterate through the player's inventory. Minecraft datapacks don't support for-loops :/)
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 0 run loot replace entity @s hotbar.0 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 1 run loot replace entity @s hotbar.1 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 2 run loot replace entity @s hotbar.2 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 3 run loot replace entity @s hotbar.3 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 4 run loot replace entity @s hotbar.4 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 5 run loot replace entity @s hotbar.5 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 6 run loot replace entity @s hotbar.6 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 7 run loot replace entity @s hotbar.7 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 8 run loot replace entity @s hotbar.8 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 9 run loot replace entity @s inventory.0 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 10 run loot replace entity @s inventory.1 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 11 run loot replace entity @s inventory.2 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 12 run loot replace entity @s inventory.3 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 13 run loot replace entity @s inventory.4 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 14 run loot replace entity @s inventory.5 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 15 run loot replace entity @s inventory.6 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 16 run loot replace entity @s inventory.7 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 17 run loot replace entity @s inventory.8 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 18 run loot replace entity @s inventory.9 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 19 run loot replace entity @s inventory.10 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 20 run loot replace entity @s inventory.11 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 21 run loot replace entity @s inventory.12 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 22 run loot replace entity @s inventory.13 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 23 run loot replace entity @s inventory.14 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 24 run loot replace entity @s inventory.15 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 25 run loot replace entity @s inventory.16 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 26 run loot replace entity @s inventory.17 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 27 run loot replace entity @s inventory.18 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 28 run loot replace entity @s inventory.19 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 29 run loot replace entity @s inventory.20 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 30 run loot replace entity @s inventory.21 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 31 run loot replace entity @s inventory.22 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 32 run loot replace entity @s inventory.23 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 33 run loot replace entity @s inventory.24 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 34 run loot replace entity @s inventory.25 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches 35 run loot replace entity @s inventory.26 1 mine 42069 0 42069 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:overworld"}] run execute if score slot tc_compass matches -106 run loot replace entity @s weapon.offhand 1 mine 42069 0 42069 stick{drop_contents:true}

# If a hunter is in the nether, update their compass to the nether compass
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 0 run loot replace entity @s hotbar.0 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 1 run loot replace entity @s hotbar.1 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 2 run loot replace entity @s hotbar.2 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 3 run loot replace entity @s hotbar.3 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 4 run loot replace entity @s hotbar.4 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 5 run loot replace entity @s hotbar.5 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 6 run loot replace entity @s hotbar.6 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 7 run loot replace entity @s hotbar.7 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 8 run loot replace entity @s hotbar.8 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 9 run loot replace entity @s inventory.0 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 10 run loot replace entity @s inventory.1 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 11 run loot replace entity @s inventory.2 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 12 run loot replace entity @s inventory.3 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 13 run loot replace entity @s inventory.4 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 14 run loot replace entity @s inventory.5 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 15 run loot replace entity @s inventory.6 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 16 run loot replace entity @s inventory.7 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 17 run loot replace entity @s inventory.8 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 18 run loot replace entity @s inventory.9 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 19 run loot replace entity @s inventory.10 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 20 run loot replace entity @s inventory.11 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 21 run loot replace entity @s inventory.12 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 22 run loot replace entity @s inventory.13 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 23 run loot replace entity @s inventory.14 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 24 run loot replace entity @s inventory.15 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 25 run loot replace entity @s inventory.16 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 26 run loot replace entity @s inventory.17 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 27 run loot replace entity @s inventory.18 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 28 run loot replace entity @s inventory.19 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 29 run loot replace entity @s inventory.20 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 30 run loot replace entity @s inventory.21 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 31 run loot replace entity @s inventory.22 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 32 run loot replace entity @s inventory.23 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 33 run loot replace entity @s inventory.24 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 34 run loot replace entity @s inventory.25 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches 35 run loot replace entity @s inventory.26 1 mine 42070 0 42070 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_nether"}] run execute if score slot tc_compass matches -106 run loot replace entity @s weapon.offhand 1 mine 42070 0 42070 stick{drop_contents:true}

# If a hunter is in the end, update their compass to the end compass
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 0 run loot replace entity @s hotbar.0 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 1 run loot replace entity @s hotbar.1 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 2 run loot replace entity @s hotbar.2 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 3 run loot replace entity @s hotbar.3 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 4 run loot replace entity @s hotbar.4 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 5 run loot replace entity @s hotbar.5 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 6 run loot replace entity @s hotbar.6 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 7 run loot replace entity @s hotbar.7 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 8 run loot replace entity @s hotbar.8 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 9 run loot replace entity @s inventory.0 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 10 run loot replace entity @s inventory.1 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 11 run loot replace entity @s inventory.2 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 12 run loot replace entity @s inventory.3 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 13 run loot replace entity @s inventory.4 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 14 run loot replace entity @s inventory.5 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 15 run loot replace entity @s inventory.6 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 16 run loot replace entity @s inventory.7 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 17 run loot replace entity @s inventory.8 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 18 run loot replace entity @s inventory.9 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 19 run loot replace entity @s inventory.10 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 20 run loot replace entity @s inventory.11 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 21 run loot replace entity @s inventory.12 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 22 run loot replace entity @s inventory.13 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 23 run loot replace entity @s inventory.14 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 24 run loot replace entity @s inventory.15 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 25 run loot replace entity @s inventory.16 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 26 run loot replace entity @s inventory.17 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 27 run loot replace entity @s inventory.18 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 28 run loot replace entity @s inventory.19 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 29 run loot replace entity @s inventory.20 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 30 run loot replace entity @s inventory.21 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 31 run loot replace entity @s inventory.22 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 32 run loot replace entity @s inventory.23 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 33 run loot replace entity @s inventory.24 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 34 run loot replace entity @s inventory.25 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches 35 run loot replace entity @s inventory.26 1 mine 42071 0 42071 stick{drop_contents:true}
execute in minecraft:overworld run execute if entity @s[nbt={Dimension:"minecraft:the_end"}] run execute if score slot tc_compass matches -106 run loot replace entity @s weapon.offhand 1 mine 42071 0 42071 stick{drop_contents:true}

# If a hunter and speedrunner are in the same dimension, indicate the speedrunner's name and y-coordinate whenever the hunter is holding the compass
execute if score slot tc_compass = selected tc_compass if entity @s[nbt={Dimension:"minecraft:overworld"}] if entity @a[tag=tracked, nbt={Dimension:"minecraft:overworld"}] run title @s actionbar [{"text":" Tracking ","color":"red"},{"selector":"@e[tag=tracked]", "color":"yellow","italic":true},{"text":" (Y: ","color":"dark_green"},{"score":{"name":"@e[tag=tracked,limit=1]", "objective":"ycoord"},"color":"dark_green"},{"text":")","color":"dark_green"}]
execute if score slot tc_compass = selected tc_compass if entity @s[nbt={Dimension:"minecraft:the_nether"}] if entity @a[tag=tracked, nbt={Dimension:"minecraft:the_nether"}] run title @s actionbar [{"text":" Tracking ","color":"red"},{"selector":"@e[tag=tracked]", "color":"yellow","italic":true},{"text":" (Y: ","color":"dark_green"},{"score":{"name":"@e[tag=tracked,limit=1]", "objective":"ycoord"},"color":"dark_green"},{"text":")","color":"dark_green"}]
execute if score slot tc_compass = selected tc_compass if entity @s[nbt={Dimension:"minecraft:the_end"}] if entity @a[tag=tracked, nbt={Dimension:"minecraft:the_end"}] run title @s actionbar [{"text":" Tracking ","color":"red"},{"selector":"@e[tag=tracked]", "color":"yellow","italic":true},{"text":" (Y: ","color":"dark_green"},{"score":{"name":"@e[tag=tracked,limit=1]", "objective":"ycoord"},"color":"dark_green"},{"text":")","color":"dark_green"}]

# if a hunter and speedrunner are in different dimensions, indicate that the speedrunner is in another dimension when the hunter is holding the compass
execute if score slot tc_compass = selected tc_compass if entity @s[nbt={Dimension:"minecraft:overworld"}] if entity @a[tag=tracked, nbt={Dimension:"minecraft:the_nether"}] run title @s actionbar [{"selector":"@e[tag=tracked]", "color":"yellow","italic":true},{"text":" is in another dimension!","color":"red","italic":false}]
execute if score slot tc_compass = selected tc_compass if entity @s[nbt={Dimension:"minecraft:overworld"}] if entity @a[tag=tracked, nbt={Dimension:"minecraft:the_end"}] run title @s actionbar [{"selector":"@e[tag=tracked]", "color":"yellow","italic":true},{"text":" is in another dimension!","color":"red", "italic":false}]
execute if score slot tc_compass = selected tc_compass if entity @s[nbt={Dimension:"minecraft:the_nether"}] if entity @a[tag=tracked, nbt={Dimension:"minecraft:overworld"}] run title @s actionbar [{"selector":"@e[tag=tracked]", "color":"yellow","italic":true},{"text":" is in another dimension!","color":"red", "italic":false}]
execute if score slot tc_compass = selected tc_compass if entity @s[nbt={Dimension:"minecraft:the_nether"}] if entity @a[tag=tracked, nbt={Dimension:"minecraft:the_end"}] run title @s actionbar [{"selector":"@e[tag=tracked]", "color":"yellow","italic":true},{"text":" is in another dimension!","color":"red", "italic":false}]
execute if score slot tc_compass = selected tc_compass if entity @s[nbt={Dimension:"minecraft:the_end"}] if entity @a[tag=tracked, nbt={Dimension:"minecraft:overworld"}] run title @s actionbar [{"selector":"@e[tag=tracked]", "color":"yellow","italic":true},{"text":" is in another dimension!","color":"red", "italic":false}]
execute if score slot tc_compass = selected tc_compass if entity @s[nbt={Dimension:"minecraft:the_end"}] if entity @a[tag=tracked, nbt={Dimension:"minecraft:the_nether"}] run title @s actionbar [{"selector":"@e[tag=tracked]", "color":"yellow","italic":true},{"text":" is in another dimension!","color":"red", "italic":false}]

# once the compass is deselected, clear the action bar labels printed in the nine lines above
execute if score slot tc_compass > selected tc_compass run title @s actionbar ""
execute if score slot tc_compass < selected tc_compass run title @s actionbar ""